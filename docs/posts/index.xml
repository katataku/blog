<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Posts on katataku&#39;s blog</title>
        <link>http://www.katataku.dev/posts/</link>
        <description>Recent content in Posts on katataku&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>jp-JP</language>
        <lastBuildDate>Thu, 16 Jul 2020 15:51:29 +0900</lastBuildDate>
        <atom:link href="http://www.katataku.dev/posts/index.xml" rel="self" type="application/rss+xml" />
        
        <item>
            <title>初めてRFC読んでみた その2</title>
            <link>http://www.katataku.dev/posts/rfc6749-2/</link>
            <pubDate>Thu, 16 Jul 2020 15:51:29 +0900</pubDate>
            
            <guid>http://www.katataku.dev/posts/rfc6749-2/</guid>
            <description>引き続き読み進めていく。 RFCらしい文体が目立ってきた。 2.クライアント登録 クライアントは事前に認可サーバへの登録が必要。 2.1クライアント</description>
            <content type="html"><![CDATA[<p>引き続き読み進めていく。
RFCらしい文体が目立ってきた。</p>
<h2 id="2クライアント登録">2.クライアント登録</h2>
<p>クライアントは事前に認可サーバへの登録が必要。</p>
<h3 id="21クライアントタイプ">2.1クライアントタイプ</h3>
<p>2つのクライアントタイプがある。</p>
<ul>
<li>コンフィデンシャル</li>
</ul>
<p>クレデンシャルの秘密が保持できるクライアント。セキュアなサーバなど。</p>
<ul>
<li>パブリック</li>
</ul>
<p>クレデンシャルの秘密が保持できないクライアント。スマホアプリなど。</p>
<h3 id="22クライアント識別子">2.2クライアント識別子</h3>
<p>文字列。秘密じゃないので、これだけで認証に使うのは禁止。</p>
<h3 id="23クライアント認証">2.3クライアント認証</h3>
<p>クライアントタイプがコンフィデンシャルな場合は、クライアントの認証を行う。
方式はパスワード認証か、それ以外か。</p>
<h3 id="231クライアントパスワード">2.3.1クライアントパスワード</h3>
<p>クライアントIDとクライアントシークレット（ID/パスワード）を利用して認証する。</p>
<p>ここには、いくつか注意事項の記載がある。「basic認証のサポートは必須」「TLSの利用が必須」「ブルートフォースアタック対策は必須」など。</p>
<h3 id="232その他の認証方式">2.3.2その他の認証方式</h3>
<p>その他の認証方式を利用してもいいけど、明確にすることが必須。</p>
<h2 id="24未登録クライアント">2.4未登録クライアント</h2>
<p>未登録クライアントを利用してもいい。（「本仕様で利用を排除するものではない」というRFCらいし書き方。）
ただし、そのような利用は、本仕様のスコープ外。各自、セキュリティに気をつけて考えてね。</p>
]]></content>
        </item>
        
        <item>
            <title>初めてRFC読んでみた その１</title>
            <link>http://www.katataku.dev/posts/rfc6749-1/</link>
            <pubDate>Wed, 15 Jul 2020 22:18:40 +0900</pubDate>
            
            <guid>http://www.katataku.dev/posts/rfc6749-1/</guid>
            <description>はじめに 業務でAPI GWの認証認可部分を担当することになった。 引継ぎ元となる先輩に認証認可の入門書のオススメを聞いたところ、 「世の中の入門書</description>
            <content type="html"><![CDATA[<h2 id="はじめに">はじめに</h2>
<p>業務でAPI GWの認証認可部分を担当することになった。
引継ぎ元となる先輩に認証認可の入門書のオススメを聞いたところ、
「世の中の入門書は中級者向けだから、RFC読めばいいよ」という、ありがたいお言葉をいただいた。</p>
<p>そこで、はじめてRFCを読むわけだが、
人目見ただけで分量に嫌気が差した。</p>
<p>世の中には簡単に説明している記事はあるが、読みたいのはあくまでRFC。
そこで、あくまでRFCの記載内容にしたがって、簡単に要約してみる。</p>
<p>今回は<a href="https://openid-foundation-japan.github.io/rfc6749.ja.html">RFC6749</a>を読むことにする。
なお、実装にあたっては厳密性が重要になるため、原文（もちろん英語版）で理解することが前提とのこと。</p>
<h2 id="1はじめに">1.はじめに</h2>
<p>要約と言いつつ、さっそく銀行と通帳アプリで例えることにする。</p>
<p>通帳アプリに銀行のパスワード教えるのはいまいちだよね。
なぜなら</p>
<ul>
<li>通帳アプリが利用者本人とまったく同じ権限使えるよね。</li>
<li>利用者が通帳アプリを複数使っていた場合、アプリごとに利用を停止できない。パスワード変更すれば停止できるけど、全部利用止まっちゃうよね。</li>
<li>通帳アプリの情報漏洩が問題だよね。
という理由。</li>
</ul>
<p>そこで、権限移譲用の別のトークンを用意しよう！</p>
<h3 id="11登場人物">1.1登場人物</h3>
<p>登場人物は以下の4種類。</p>
<ul>
<li>リソースオーナー：通帳アプリの利用者（個人情報のオーナーってイメージ）</li>
<li>リソースサーバ：銀行のサーバ。</li>
<li>クライアント：通帳アプリ</li>
<li>認可サーバ ：通帳アプリにトークンを発行するサーバ 。銀行のサーバと同じでもいいし、違うかもしれない。</li>
</ul>
<h3 id="12プロトコルフロー">1.2プロトコルフロー</h3>
<p>プロトコルフローは大きく分けると3つの工程で成り立っている。</p>
<ol>
<li>
<p>クライアントとリソースオーナーのやりとり。</p>
<p>クライアントは認可を要求し、<strong>認可グラント</strong>を受け取る。</p>
</li>
<li>
<p>クライアントと認可サーバのやりとり。</p>
<p>クライアントは<strong>認可グラント</strong>を提示し、<strong>アクセストークン</strong>を受け取る。</p>
</li>
<li>
<p>クライアントとリソースサーバのやりとり。</p>
<p>クライアントは<strong>アクセストークン</strong>を提示し、リクエストが成立する。</p>
</li>
</ol>
<h3 id="13認可グラント">1.3認可グラント</h3>
<p>ここからは用語の説明。</p>
<p>認可グラントは、リソースオーナーが認可したことを表すものだよ。
グラントタイプは4種類。</p>
<ul>
<li>認可コード</li>
<li>インプリシット</li>
<li>リソースオーナーパスワードクレデンシャル</li>
<li>クライアントクレデンシャル</li>
</ul>
<p>それぞれ説明します。</p>
<h4 id="131認可コード">1.3.1認可コード</h4>
<p>認可サーバが発行する秘密の文字列。</p>
<p>クライアントはリソースオーナーを認可サーバにリダイレクトする。
認可サーバ上で認証されたら、認可コードとともにリダイレクトされて、戻ってくる。</p>
<p>セキュリティ的にgood.</p>
<h4 id="132インプリシット">1.3.2インプリシット</h4>
<p>認可グラントを渡さず、直接<strong>アクセストークン</strong>をクライアントに返す。</p>
<p>認可コードフローを短縮したもの。そもそも上で説明した認可コードフローと違うことをやってる。</p>
<h4 id="133リソースオーナーパスワードクレデンシャル">1.3.3リソースオーナーパスワードクレデンシャル</h4>
<p>IDとパスワードのようなもの。</p>
<p>はじめにで記載されているイマイチな例。
ただし、クライアントがOSの一部の場合はいいんじゃないか、ということ。</p>
<h4 id="134クライアントクレデンシャル">1.3.4クライアントクレデンシャル</h4>
<p>秘密の文字列。</p>
<p>あらかじめクライアントと認可サーバの間で取り決めておく。
認可範囲がクライアントの管理かである場合に使う。</p>
<h2 id="14アクセストークン">1.4アクセストークン</h2>
<p>秘密の文字列。リソースへアクセスする際に使う。</p>
<h2 id="15リフレッシュトークン">1.5リフレッシュトークン</h2>
<p>オプションの項目。
期限が切れたアクセストークンの代わりに、新しいアクセストークンをもらうために利用することができる。</p>
<p>アクセストークンの有効期限が切れるたび認可グラントを提示するのはセキュリティリスクが高まる。
リフレッシュの際には、専用のトークンを利用することで、認証情報のやりとりを減らすことができる。</p>
<p>リフレッシュトークンを利用する流れは以下の通り。</p>
<ol>
<li>
<p>クライアントと認可サーバのやりとり（認可フローの2に相当）</p>
<p><strong>認可グラント</strong>を提示して、<strong>アクセストークンとリフレッシュトークン</strong>を受け取る。</p>
</li>
<li>
<p>クライアントとリソースサーバのやりとり（認可フローの3に相当）</p>
<p>クライアントは<strong>アクセストークン</strong>を提示して、リソースへアクセスする。
<strong>有効期限が切れていたら、エラーを返して無効であることを伝える。</strong></p>
</li>
<li>
<p>クライアントと認可サーバのやりとり</p>
<p>クライアントは<strong>リフレッシュトークン</strong>を提示して、新しい<strong>アクセストークン</strong>を受け取る。</p>
</li>
</ol>
<h3 id="1619">1.6〜1.9</h3>
<p>割愛</p>
]]></content>
        </item>
        
        <item>
            <title>AWS SAA受験記</title>
            <link>http://www.katataku.dev/posts/aws-ssa/</link>
            <pubDate>Sun, 12 Jul 2020 23:45:31 +0900</pubDate>
            
            <guid>http://www.katataku.dev/posts/aws-ssa/</guid>
            <description>AWS認定 Solution Architect associateに合格したので勉強したポイントを記録する。 インプット学習 まずは、有名な黒本をメルカリで購入した。正直あまり読</description>
            <content type="html"><![CDATA[<p>AWS認定　Solution Architect associateに合格したので勉強したポイントを記録する。</p>
<h2 id="インプット学習">インプット学習</h2>
<p>まずは、有名な黒本をメルカリで購入した。正直あまり読んでない。</p>
<p>ひたすら、black belt Onlineセミナーをyoutubeで見ていた。
腹落ちしてない分野は2回、3回と繰り返し確認。</p>
<h2 id="アウトプット学習">アウトプット学習</h2>
<p>udemyの試験対策講座を受講した。
「問題を解く」→「間違った分野のblackbeltセミナーや公式documentを見返す」ということを繰り返す。（2-3テスト分）</p>
<p>申し込み前には、公式の模試を受験した。8割取れてたので、申し込みを決意。</p>
<h2 id="試験当日">試験当日</h2>
<p>自宅から最寄りの試験会場を選択した。
試験開始1.5時間前には同じビルのスタバに入って追い込みをした。
復習のつもりでよくある質問を読み返していたら、はじめて知る知識もあって少し焦った。</p>
<h2 id="つまづきポイント">つまづきポイント</h2>
<p>自分がつまずいたポイントは以下の通り。</p>
<h3 id="iam">IAM</h3>
<p>ユーザ、ロール、ポリシーがごっちゃになった。
さらに（AWS）アカウントという用語もあり、整理が必要。
実際に触っているとすぐ腹落ちした。</p>
<h3 id="ec2のコスト最適化">EC2のコスト最適化</h3>
<p>EC2のスポットインスタンス、RIやsaving plansなどが最後まで混乱していた。
自腹で実機を触っていれば感覚が違ったかも？</p>
<h3 id="s3のコスト最適化">S3のコスト最適化</h3>
<p>こちらも同じ。IAとかが最後まで頭の中でごっちゃになっていた。
上記EC2とまとめて、直前にまとめて整理すると理解できた。</p>
]]></content>
        </item>
        
        <item>
            <title>hugoで利用するスクリプトを作成した</title>
            <link>http://www.katataku.dev/posts/hugo-scripts/</link>
            <pubDate>Sun, 12 Jul 2020 00:45:56 +0900</pubDate>
            
            <guid>http://www.katataku.dev/posts/hugo-scripts/</guid>
            <description>hugoをgithub pagesにデプロイする際に利用するスクリプトを作成した。 local deploy コンテンツを生成し、ローカル確認するためにサーバ を起動す</description>
            <content type="html"><![CDATA[<p>hugoをgithub pagesにデプロイする際に利用するスクリプトを作成した。</p>
<h2 id="local-deploy">local deploy</h2>
<p>コンテンツを生成し、ローカル確認するためにサーバ を起動する。
こちらは単純。</p>
<pre><code>hugo;
hugo server -D 
</code></pre><h2 id="deploy">deploy</h2>
<p>確認した結果を、githubリポジトリにpushするためのスクリプト。
全体の整合性を担保するために、リコンパイルを実施している。</p>
<pre><code>#!/bin/sh

echo -e &quot;\033[0;32mDeploying updates to GitHub...\033[0m&quot;

hugo

git add docs/

msg=&quot;rebuilding site `date`&quot;
if [ $# -eq 1 ]
  then msg=&quot;$1&quot;
fi
git commit -m &quot;$msg&quot;

git push origin master
</code></pre><p><a href="https://qiita.com/KoKeCross/items/2b24908f60d235bcc49f">こちら</a>を参考に作成した。</p>
]]></content>
        </item>
        
        <item>
            <title>First Article</title>
            <link>http://www.katataku.dev/posts/first-article/</link>
            <pubDate>Sat, 11 Jul 2020 23:49:00 +0900</pubDate>
            
            <guid>http://www.katataku.dev/posts/first-article/</guid>
            <description>はじめての記事</description>
            <content type="html"><![CDATA[<p>はじめての記事</p>
]]></content>
        </item>
        
    </channel>
</rss>
